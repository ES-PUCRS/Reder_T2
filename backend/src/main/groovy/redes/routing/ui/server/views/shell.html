<!DOCTYPE html>
<html>

<head>
	<title>Redes/Lab: Shell</title>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script src="https://unpkg.com/jquery.terminal/js/jquery.terminal.min.js"></script>
	<link rel="stylesheet" href="https://unpkg.com/jquery.terminal/css/jquery.terminal.min.css"/>
</head>

<body>
	<script>
		$('body').terminal({

		  //   free: function(file){
				// fetch('http://localhost:8080/free?file=' + file)
		  //           .then(r => r.text())
    //     			.then(exp => { if(exp != ""){ return exp } });
		  //   },

		  //   load: function(...args){
		  //   	const options = $.terminal.parse_options(args);
		  //   	let params
		  //   	let urn

		  //   			if(options.memory)	{	urn = "cpu_load_memory"; params = options.memory; }
		  //   	else 	if(options.cpu)		{	urn = "cpu_load"; params = options.cpu; }
		  //   	else 	if(options.direct)	{ params = options.direct; }
		  //   	else						{ this.error('Invalid argument'); return }


		  //   	if(options.direct){ 
		  //   		return fetch('http://localhost:8080/cpu_load_memory?file=' + params)
    //     				.then( res => res.text() )
    //     				.then( exp => {
				// 				if(exp == ""){
				// 					return fetch('http://localhost:8080/cpu_load?file=' + params)
				// 						.then( re => re.text() )
				// 						.then( ex => { if(ex != ""){ return ex } } )
				// 				} else { return exp	}
    // 						});
		  //   	} else {
		  //   		return fetch('http://localhost:8080/' + urn + '?file=' + params)
		  //           			.then(res => res.text())
		  //           			.then(exp => { if(exp != ""){ return exp } });
		  //   	}
		  //   },

		  //   dump: function(...args) {
		  //   	const options = $.terminal.parse_options(args);
		  //   	let params
		  //   	let urn

		  //   			if(options.memory != undefined) { urn = "dump_memory"; params = options.memory; }
		  //   	else 	if(options.pages  != undefined)	{ urn = "dump_pages";  params = options.pages;  }
		  //   	else 	if(options.registers)			{ urn = "dump_registers"; 					  	}
		  //   	else									{ this.error('Invalid argument'); return 		}

		  //   	if(options.registers){
		  //   		if(options.registers != true){
		  //   			this.error('This method does not contains argument'); return 
		  //   		}
		  //   	}

	   //  		return fetch('http://localhost:8080/' + urn + '?params=' + params)
	   //          			.then(res => res.text());
		  //   },


		    // get: async function(path) {
		    //     let res = await fetch(path);
		    //     return res.text();
    		// },



		    fetch: function(file){
				fetch('http://localhost:'+location.port+'/API?port='+location.port)
		            .then(r => r.text())
		    },

		    
		    cls: function() {
		        this.exec('clear');
		        this.echo('Redes de computadores & Laboratorio de redes,\n'+
						  'RELEASE CLI, API -> Port forwarding')
		    },


		    help: function(){
		    	this.echo(
		    		">> Help section ~" +
		    		
		    		"\n [...] Optiona params"+
		    		"\n <...> Needed params"+

		    		"\n\n > cls"+
		    		"\n Clear the terminal;"+
		    		
					"\n\n > ping <dst port>"+
					"\n Send a Packet Internet Grouper to the desired destination.\n"
	    		);
		    }

		}, {
			checkArity: false,
			completion: true,
		    greetings: 	'Redes de computadores & Laboratorio de redes,\n'+
						'RELEASE CLI, API -> Port forwarding' +
						'\n=> Type help see the commands list'
		});
	</script>
</body>

</html>